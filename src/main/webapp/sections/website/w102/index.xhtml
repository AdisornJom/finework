<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:f="http://java.sun.com/jsf/core">

    <style type="text/css">
        .left_panel {
            width: 160px;
        }
        .right_panel {
        }

        .ui-timer{
            background: none;
            border: none;
            padding: 0px;
            color: red;
        }

    </style>

    <p:panel header="#{msgs['menu.website.w102']}">

        <h:form>

            <p:messages id="edit_msg" autoUpdate="false" showIcon="false" style="width: 98%;margin-left: auto;margin-right: auto;"/>

            <p:panel style="max-width: 900px;margin-bottom: 10px;border: 0px;text-align: right">
                <h:panelGroup>
                    <font class="require">*</font>
                    <h:outputLabel value=" Required Fields" style="font-weight: bolder;" styleClass="sub-label"/>
                </h:panelGroup>
            </p:panel>


            <p:fieldset legend="การบำรุงรักษาทั้งระบบ" style="border: 0px;">
                <p:panel style="max-width: 960px;margin-bottom: 10px;border-right: 0px;border-radius: 0px;">
                    <h:panelGrid columns="2" border="0" cellpadding="2" cellspacing="4" columnClasses="left_panel,right_panel">
                        <h:outputText value="ระบบหลัก：" styleClass="lb_bold"/>
                        <p:selectOneRadio value="#{w102Controller.status}">
                            <f:selectItem itemLabel="#{msgs['common.on']}" itemValue="1"/>
                            <f:selectItem itemLabel="#{msgs['common.off']}" itemValue="0"/>
                        </p:selectOneRadio>

                        <h:outputText value="ตั้งแต่ :" styleClass="lb_bold"/>
                        <p:calendar binding="#{bindingController.calendar}" pattern="dd-MM-yyyy HH:mm" value="#{w102Controller.startDt}"/>

                        <h:outputText value="จนถึง :" styleClass="lb_bold"/>
                        <p:calendar binding="#{bindingController.calendar}" pattern="dd-MM-yyyy HH:mm" value="#{w102Controller.endDt}"/>

                        <h:outputText value="เหตุผล :" styleClass="lb_bold"/>
                        <p:selectOneMenu value="#{w102Controller.desc}" style="width: 165px;">
                            <f:selectItem itemLabel="#{msgs['w102.api.reason1']}"  itemValue="w102.api.reason1" />
                            <f:selectItem itemLabel="#{msgs['w102.api.reason2']}"  itemValue="w102.api.reason2" />
                            <f:selectItem itemLabel="#{msgs['w102.api.reason3']}"  itemValue="w102.api.reason3" />
                        </p:selectOneMenu>

                        <h:outputText value="เปิดอัตโนมัติ :" styleClass="lb_bold"/>
                        <h:panelGrid columns="3">
                            <p:selectBooleanCheckbox value="#{w102Controller.autoOnMA}"/>
                            <h:outputText rendered="#{w102Controller.status eq '0' and w102Controller.autoOnMA}" value="นับถอยหลัง :" styleClass="lb_bold"/>
                            <pe:timer rendered="#{w102Controller.status eq '0' and w102Controller.autoOnMA}" timeout="#{w102Controller.count1}" format="HH:mm:ss" global="false" update=":content"/>
                        </h:panelGrid>


                    </h:panelGrid>
                </p:panel>
            </p:fieldset>

            <h:panelGrid columns="2" cellpadding="0" cellspacing="1" style="margin-left: 15px;margin-bottom: 10px;">
                <p:commandButton binding="#{bindingController.btnSave}" value="#{msgs['btn.save']}" styleClass="edit-btn"
                                 actionListener="#{w102Controller.editMainMA()}" update=":content"/>
                <p:commandButton binding="#{bindingController.btnCancel}" value="#{msgs['btn.cancel']}" styleClass="clear-btn"/>
            </h:panelGrid>

            <br/>

            <p:fieldset legend="การบำรุงรักษาเฉพาะ API" style="border: 0px;">
                <p:panel style="max-width: 960px;margin-bottom: 10px;border-right: 0px;border-radius: 0px;">
                    <ui:repeat var="item" value="#{w102Controller.items}">
                        <h:panelGrid columns="7" cellpadding="2" cellspacing="4" columnClasses="left_panel,right_panel">
                            <p:outputLabel value="#{item.name} :"/>
                            <p:selectOneRadio value="#{item.status}">
                                <f:selectItem itemLabel="#{msgs['common.on']}" itemValue="1"/>
                                <f:selectItem itemLabel="#{msgs['common.off']}" itemValue="0"/>
                            </p:selectOneRadio>
                            <p:calendar binding="#{bindingController.calendar}" value="#{item.apiMA.startDt}" pattern="dd-MM-yyyy HH:mm" size="13"/>
                            <p:calendar binding="#{bindingController.calendar}" value="#{item.apiMA.endDt}" pattern="dd-MM-yyyy HH:mm" size="13"/>
                            <p:selectOneMenu value="#{item.apiMA.desc}" style="width: 150px;">
                                <f:selectItem itemLabel=""  itemValue="" />
                                <f:selectItem itemLabel="#{msgs['w102.api.reason1']}"  itemValue="w102.api.reason1" />
                                <f:selectItem itemLabel="#{msgs['w102.api.reason2']}"  itemValue="w102.api.reason2" />
                                <f:selectItem itemLabel="#{msgs['w102.api.reason3']}"  itemValue="w102.api.reason3" />
                            </p:selectOneMenu>

                            <p:commandButton binding="#{bindingController.btnSave}" value="#{msgs['btn.save']}" action="#{w102Controller.editApiMA()}" styleClass="edit-btn" update=":content">
                                <f:setPropertyActionListener value="#{item}" target="#{w102Controller.selected}" />
                            </p:commandButton>

                        </h:panelGrid> 
                    </ui:repeat>
                </p:panel>
            </p:fieldset>

        </h:form>

    </p:panel>
</ui:composition>